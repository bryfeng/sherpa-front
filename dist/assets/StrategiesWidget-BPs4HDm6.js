import{dM as M,eb as ee,ec as A,fj as P,dU as n,dO as e,fk as se,e2 as te,es as H,ee as z,dR as ae,eE as J,f0 as V,e0 as le,ef as re,eg as O,ed as ne,fl as ce,fm as oe,fn as ie,ek as de,fo as ue,dP as W,f1 as xe}from"./index-DkD0KfRO.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=M("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=M("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=M("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=M("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=M("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=M("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function ye(s,d){const l=ee(A.strategies.listByWallet,s?{walletAddress:s,status:d}:"skip");return{strategies:l??[],isLoading:l===void 0,isEmpty:l!==void 0&&l.length===0}}function ge(){const s=P(A.strategies.activate),d=P(A.strategies.pause),l=P(A.strategies.update),i=P(A.strategies.remove),c=P(A.strategyExecutions.executeNow);return{activate:n.useCallback(async o=>s({strategyId:o}),[s]),pause:n.useCallback(async o=>d({strategyId:o}),[d]),update:n.useCallback(async(o,p)=>l({strategyId:o,...p}),[l]),remove:n.useCallback(async o=>i({strategyId:o}),[i]),executeNow:n.useCallback(async o=>c({strategyId:o}),[c])}}function K(s){if(!s)return"Not scheduled";const d=Date.now(),l=s-d;if(l<0)return"Overdue";if(l<6e4)return"In less than a minute";if(l<36e5){const c=Math.round(l/6e4);return`In ${c} minute${c>1?"s":""}`}if(l<864e5){const c=Math.round(l/36e5);return`In ${c} hour${c>1?"s":""}`}const i=Math.round(l/864e5);return`In ${i} day${i>1?"s":""}`}function je(s){if(!s)return"Never";const l=Date.now()-s;if(l<6e4)return"Just now";if(l<36e5){const c=Math.round(l/6e4);return`${c} minute${c>1?"s":""} ago`}if(l<864e5){const c=Math.round(l/36e5);return`${c} hour${c>1?"s":""} ago`}const i=Math.round(l/864e5);return`${i} day${i>1?"s":""} ago`}const be={draft:"Draft",pending_session:"Pending Setup",active:"Active",paused:"Paused",completed:"Completed",failed:"Failed",expired:"Expired",archived:"Archived"},Q={draft:"var(--text-muted)",pending_session:"var(--warning)",active:"var(--success)",paused:"var(--warning)",completed:"var(--text-muted)",failed:"var(--error)",expired:"var(--error)",archived:"var(--text-muted)"},Y={dca:"DCA",rebalance:"Rebalance",limit_order:"Limit",stop_loss:"Stop Loss",take_profit:"Take Profit",custom:"Custom"};function Ne(s){return s==="active"}function ke(s){return s==="paused"||s==="pending_session"}function we(s){return s==="active"||s==="paused"||s==="pending_session"}function Se(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(s)}function Ce({strategy:s,onPause:d,onResume:l,onStop:i,onEdit:c,onViewDetails:o}){const[p,j]=n.useState(!1),[b,N]=n.useState(!1),h=s.config,f=h.amount_usd,k=h.frequency,y=h.from_token,w=h.to_token,g=s.totalExecutions??0,r=s.successfulExecutions??0,v=g>0?r/g*100:0,S=s.requiresManualApproval,C=async u=>{N(!0),j(!1);try{await u()}finally{N(!1)}};return e.jsxs("div",{className:"rounded-lg p-4 transition-colors hover:bg-opacity-80 cursor-pointer relative",style:{background:"var(--surface)",border:"1px solid var(--line)"},onClick:()=>o(s._id),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium truncate",style:{color:"var(--text)"},children:s.name}),e.jsxs("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full shrink-0",style:{background:`${Q[s.status]}20`,color:Q[s.status]},children:[be[s.status],s.status==="active"&&S&&" (Manual)"]})]}),e.jsxs("p",{className:"text-xs truncate",style:{color:"var(--text-muted)"},children:[Y[s.strategyType],y&&w&&` · ${y} → ${w}`]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),j(!p)},className:"p-1.5 rounded-md hover:bg-black/5 transition-colors",disabled:b,children:e.jsx(se,{className:"h-4 w-4",style:{color:"var(--text-muted)"}})}),p&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:u=>{u.stopPropagation(),j(!1)}}),e.jsxs("div",{className:"absolute right-0 top-full mt-1 z-20 rounded-lg py-1 min-w-[140px] shadow-lg",style:{background:"var(--surface)",border:"1px solid var(--line)"},children:[Ne(s.status)&&e.jsxs("button",{onClick:u=>{u.stopPropagation(),C(()=>d(s._id))},className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-black/5",style:{color:"var(--text)"},children:[e.jsx(ve,{className:"h-4 w-4"}),"Pause"]}),ke(s.status)&&e.jsxs("button",{onClick:u=>{u.stopPropagation(),C(()=>l(s._id))},className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-black/5",style:{color:"var(--text)"},children:[e.jsx(X,{className:"h-4 w-4"}),"Activate"]}),we(s.status)&&e.jsxs("button",{onClick:u=>{u.stopPropagation(),C(()=>i(s._id))},className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-black/5",style:{color:"var(--error)"},children:[e.jsx(he,{className:"h-4 w-4"}),"Delete"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 shrink-0",style:{color:"var(--accent)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Type"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:Y[s.strategyType]})]})]}),f&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"h-4 w-4 shrink-0",style:{color:"var(--accent)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Amount"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:Se(f)})]})]}),k&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4 shrink-0",style:{color:"var(--accent)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Frequency"}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:k})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 shrink-0",style:{color:"var(--success)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:"Executions"}),e.jsxs("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:[r,"/",g]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 text-xs",style:{borderTop:"1px solid var(--line)"},children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[g===0?e.jsx(z,{className:"h-3 w-3",style:{color:"var(--text-muted)"}}):v>=90?e.jsx(H,{className:"h-3 w-3",style:{color:"var(--success)"}}):e.jsx(ae,{className:"h-3 w-3",style:{color:"var(--warning)"}}),e.jsx("span",{style:{color:"var(--text-muted)"},children:g===0?"No executions yet":`${v.toFixed(0)}% success`})]})}),e.jsxs("div",{className:"flex items-center gap-1",style:{color:"var(--text-muted)"},children:[e.jsx(z,{className:"h-3 w-3"}),e.jsx("span",{children:s.status==="active"?K(s.nextExecutionAt):je(s.lastExecutedAt)})]})]}),b&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg bg-black/10",children:e.jsx("div",{className:"h-5 w-5 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--accent)"}})})]})}const _e=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"paused",label:"Paused"},{value:"draft",label:"Draft"},{value:"pending_session",label:"Pending"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}];function Ee({strategies:s,isLoading:d,isEmpty:l,filters:i,onFiltersChange:c,onCreateNew:o,onPause:p,onResume:j,onStop:b,onEdit:N,onViewDetails:h}){const[f,k]=n.useState(""),y=s.filter(r=>{if(!f)return!0;const v=f.toLowerCase(),S=r.config,C=S.from_token||"",u=S.to_token||"";return r.name.toLowerCase().includes(v)||C.toLowerCase().includes(v)||u.toLowerCase().includes(v)||r.strategyType.toLowerCase().includes(v)}),w=s.filter(r=>r.status==="active").length,g=s.filter(r=>r.status==="pending_session").length;return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"shrink-0 px-4 pt-4 pb-3",style:{borderBottom:"1px solid var(--line)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",style:{color:"var(--text)"},children:"Strategies"}),e.jsxs("p",{className:"text-xs",style:{color:"var(--text-muted)"},children:[w," active",g>0?` · ${g} pending`:""," · ",s.length," total"]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors",style:{background:"var(--accent)",color:"var(--text-inverse)"},children:[e.jsx(J,{className:"h-4 w-4"}),"New Strategy"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 px-3 py-2 rounded-lg",style:{background:"var(--surface-2)",border:"1px solid var(--line)"},children:[e.jsx(V,{className:"h-4 w-4 shrink-0",style:{color:"var(--text-muted)"}}),e.jsx("input",{type:"text",placeholder:"Search strategies...",value:f,onChange:r=>k(r.target.value),className:"flex-1 bg-transparent text-sm outline-none",style:{color:"var(--text)"}})]}),e.jsx("select",{value:i.status??"all",onChange:r=>c({...i,status:r.target.value}),className:"px-3 py-2 rounded-lg text-sm outline-none cursor-pointer",style:{background:"var(--surface-2)",border:"1px solid var(--line)",color:"var(--text)"},children:_e.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:d?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(r=>e.jsxs("div",{className:"rounded-lg p-4 animate-pulse",style:{background:"var(--surface)",border:"1px solid var(--line)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"h-5 w-32 rounded",style:{background:"var(--surface-2)"}}),e.jsx("div",{className:"h-5 w-16 rounded-full",style:{background:"var(--surface-2)"}})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(v=>e.jsx("div",{className:"h-10 rounded",style:{background:"var(--surface-2)"}},v))})]},r))}):l?e.jsx(Ae,{onCreateNew:o}):y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(V,{className:"h-8 w-8 mb-3",style:{color:"var(--text-muted)"}}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"No strategies match your search"})]}):e.jsx("div",{className:"space-y-3",children:y.map(r=>e.jsx(Ce,{strategy:r,onPause:p,onResume:j,onStop:b,onEdit:N,onViewDetails:h},r._id))})})]})}function Ae({onCreateNew:s}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-full flex items-center justify-center mb-4",style:{background:"var(--accent-muted)"},children:e.jsx(le,{className:"h-8 w-8",style:{color:"var(--accent)"}})}),e.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:"var(--text)"},children:"No strategies yet"}),e.jsx("p",{className:"text-sm mb-4 max-w-xs",style:{color:"var(--text-muted)"},children:"Create automated trading strategies to execute your investment rules."}),e.jsxs("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors",style:{background:"var(--accent)",color:"var(--text-inverse)"},children:[e.jsx(J,{className:"h-4 w-4"}),"Create Strategy"]})]})}function Le({walletAddress:s,userId:d,walletId:l}){const[i,c]=n.useState("list"),[o,p]=n.useState(null),[j,b]=n.useState({status:"all",sortBy:"created",sortOrder:"desc"}),[N,h]=n.useState(!1),f=j.status==="all"?void 0:j.status,{strategies:k,isLoading:y,isEmpty:w}=ye(s,f),{activate:g,pause:r,update:v,remove:S,executeNow:C}=ge(),[u,x]=n.useState(null),a=k.find(m=>m._id===o),_=n.useCallback(()=>{c("create")},[]),L=n.useCallback(()=>{c("list"),p(null)},[]),D=n.useCallback(m=>{p(m),c("details")},[]),U=n.useCallback(m=>{p(m),c("edit")},[]),q=n.useCallback(async m=>{await r(m)},[r]),$=n.useCallback(async m=>{await g(m)},[g]),F=n.useCallback(async m=>{await S(m)},[S]),B=n.useCallback(async m=>{if(o){h(!0);try{await v(o,{config:m})}finally{h(!1)}}},[v,o]),I=n.useCallback(async m=>{x(null),h(!0);try{await C(m)}catch(t){x(t.message||"Failed to create execution")}finally{h(!1)}},[C]);return s?e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs(re,{mode:"wait",children:[i==="list"&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex-1 min-h-0",children:e.jsx(Ee,{strategies:k,isLoading:y,isEmpty:w,filters:j,onFiltersChange:b,onCreateNew:_,onPause:q,onResume:$,onStop:F,onEdit:U,onViewDetails:D})},"list"),i==="create"&&e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 min-h-0 flex flex-col",children:[e.jsx(Z,{title:"Create Strategy",onBack:L}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--text-muted)"},children:"Strategies are created through the chat interface."}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:'Try asking: "Set up a weekly DCA strategy to buy ETH"'})]})})]},"create"),i==="details"&&a&&e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 min-h-0 flex flex-col",children:[e.jsx(Z,{title:a.name,onBack:L}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsx(Me,{strategy:a,onPause:()=>q(a._id),onResume:()=>$(a._id),onStop:()=>F(a._id),onUpdate:B,onExecuteNow:()=>I(a._id),isUpdating:N,executeNowError:u})})]},"details")]})}):e.jsx("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"Connect your wallet to view and manage your strategies."})})}function Z({title:s,onBack:d}){return e.jsxs("div",{className:"shrink-0 flex items-center gap-3 px-4 py-3",style:{borderBottom:"1px solid var(--line)"},children:[e.jsx("button",{onClick:d,className:"p-1.5 rounded-md hover:bg-black/5 transition-colors",children:e.jsx(me,{className:"h-4 w-4",style:{color:"var(--text-muted)"}})}),e.jsx("h2",{className:"font-medium",style:{color:"var(--text)"},children:s})]})}function Me({strategy:s,onPause:d,onResume:l,onStop:i,onUpdate:c,onExecuteNow:o,isUpdating:p,executeNowError:j}){const[b,N]=n.useState(!1),[h,f]=n.useState(null),[k,y]=n.useState(null),{address:w}=ne(),{executions:g}=ce(s._id),{approve:r,skip:v}=oe(),S=g.filter(t=>t.currentState==="awaiting_approval"||t.currentState==="executing"),C=n.useCallback(async t=>{if(!w){y("Please connect your wallet to approve");return}f(t),y(null);try{await r(t,w)}catch(E){y(E instanceof Error?E.message:"Failed to approve execution")}finally{f(null)}},[r,w]),u=n.useCallback(async t=>{f(t),y(null);try{await v(t,"Skipped by user")}catch(E){y(E instanceof Error?E.message:"Failed to skip execution")}finally{f(null)}},[v]),x=s.config,[a,_]=n.useState({amount_usd:x.amount_usd||0,frequency:x.frequency||"weekly",from_token:x.from_token||"",to_token:x.to_token||"",maxSlippageBps:x.maxSlippageBps||100,maxGasUsd:x.maxGasUsd||10,chainId:x.chainId||1}),L=s.status==="active",D=s.status==="paused"||s.status==="pending_session",U=s.status==="active"||s.status==="paused"||s.status==="pending_session",q=s.status!=="active",$=s.status==="active"||s.status==="draft",F={dca:"Dollar Cost Average",rebalance:"Portfolio Rebalance",limit_order:"Limit Order",stop_loss:"Stop Loss",take_profit:"Take Profit",custom:"Custom Strategy"},B=[{value:"hourly",label:"Hourly"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"biweekly",label:"Bi-weekly"},{value:"monthly",label:"Monthly"}],I=async()=>{await c(a),N(!1)},m=()=>{_({amount_usd:x.amount_usd||0,frequency:x.frequency||"weekly",from_token:x.from_token||"",to_token:x.to_token||"",maxSlippageBps:x.maxSlippageBps||100,maxGasUsd:x.maxGasUsd||10,chainId:x.chainId||1}),N(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(T,{label:"Type",value:F[s.strategyType]||s.strategyType}),e.jsx(T,{label:"Status",value:s.status==="active"&&s.requiresManualApproval?"Active (Manual Approval)":s.status.replace("_"," ")}),e.jsx(T,{label:"Executions",value:`${s.successfulExecutions??0}/${s.totalExecutions??0}`}),s.status==="active"&&s.nextExecutionAt?e.jsx(T,{label:"Next Execution",value:K(s.nextExecutionAt)}):e.jsx(T,{label:"Failed",value:`${s.failedExecutions??0}`})]}),s.status==="active"&&s.requiresManualApproval&&e.jsx("div",{className:"rounded-lg p-3 text-sm",style:{background:"var(--accent-muted)",border:"1px solid var(--accent)"},children:e.jsxs("p",{style:{color:"var(--accent)"},children:[e.jsx("strong",{children:"Manual Approval Mode:"})," Each execution will require your approval in the chat before transactions are signed."]})}),S.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Pending Approval"}),e.jsx("div",{className:"space-y-2",children:S.map(t=>{const E=ie(t.createdAt),R=h===t._id,G={normal:{bg:"var(--accent-muted)",border:"var(--accent)",text:"var(--accent)"},warning:{bg:"var(--warning-muted, #fef3c7)",border:"var(--warning)",text:"var(--warning)"},urgent:{bg:"var(--error-muted, #fee2e2)",border:"var(--error)",text:"var(--error)"}}[E];return e.jsx("div",{className:"rounded-lg p-4",style:{background:G.bg,border:`1px solid ${G.border}`},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{className:"h-4 w-4 shrink-0",style:{color:G.text}}),e.jsx("span",{className:"font-medium text-sm",style:{color:"var(--text)"},children:t.currentState==="awaiting_approval"?"Awaiting Your Approval":"Executing..."})]}),t.approvalReason&&e.jsx("p",{className:"text-sm mb-2",style:{color:"var(--text-muted)"},children:t.approvalReason}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",style:{color:"var(--text-muted)"},children:[e.jsx(z,{className:"h-3 w-3"}),e.jsxs("span",{children:["Created ",ue(t.createdAt)]})]})]}),t.currentState==="awaiting_approval"&&e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsxs("button",{onClick:()=>C(t._id),disabled:R,className:"px-3 py-1.5 rounded-lg text-sm font-medium flex items-center gap-1",style:{background:"var(--success)",color:"white"},children:[R?e.jsx(W,{className:"h-3 w-3 animate-spin"}):e.jsx(H,{className:"h-3 w-3"}),"Approve"]}),e.jsxs("button",{onClick:()=>u(t._id),disabled:R,className:"px-3 py-1.5 rounded-lg text-sm font-medium flex items-center gap-1",style:{background:"var(--surface)",border:"1px solid var(--line)",color:"var(--text)"},children:[e.jsx(xe,{className:"h-3 w-3"}),"Skip"]})]}),t.currentState==="executing"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 animate-spin",style:{color:"var(--accent)"}}),e.jsx("span",{className:"text-sm",style:{color:"var(--accent)"},children:"Processing..."})]})]})},t._id)})}),k&&e.jsx("div",{className:"mt-2 rounded-lg p-2 text-sm",style:{background:"var(--error-muted, #fee2e2)",color:"var(--error)"},children:k})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium",style:{color:"var(--text)"},children:"Configuration"}),q&&!b&&e.jsx("button",{onClick:()=>N(!0),className:"text-xs px-2 py-1 rounded",style:{color:"var(--accent)",background:"var(--accent-muted)"},children:"Edit"})]}),b?e.jsxs("div",{className:"rounded-lg p-3 space-y-3 text-sm",style:{background:"var(--surface-2)"},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Pair"}),e.jsxs("span",{style:{color:"var(--text)"},children:[a.from_token," → ",a.to_token]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{style:{color:"var(--text-muted)"},children:"Amount (USD)"}),e.jsx("input",{type:"number",value:a.amount_usd,onChange:t=>_({...a,amount_usd:parseFloat(t.target.value)||0}),className:"w-24 px-2 py-1 rounded text-right text-sm",style:{background:"var(--surface)",border:"1px solid var(--line)",color:"var(--text)"},min:"1",step:"1"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{style:{color:"var(--text-muted)"},children:"Frequency"}),e.jsx("select",{value:a.frequency,onChange:t=>_({...a,frequency:t.target.value}),className:"px-2 py-1 rounded text-sm",style:{background:"var(--surface)",border:"1px solid var(--line)",color:"var(--text)"},children:B.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{style:{color:"var(--text-muted)"},children:"Max slippage (%)"}),e.jsx("input",{type:"number",value:a.maxSlippageBps/100,onChange:t=>_({...a,maxSlippageBps:(parseFloat(t.target.value)||0)*100}),className:"w-24 px-2 py-1 rounded text-right text-sm",style:{background:"var(--surface)",border:"1px solid var(--line)",color:"var(--text)"},min:"0.1",max:"50",step:"0.1"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{style:{color:"var(--text-muted)"},children:"Max gas (USD)"}),e.jsx("input",{type:"number",value:a.maxGasUsd,onChange:t=>_({...a,maxGasUsd:parseFloat(t.target.value)||0}),className:"w-24 px-2 py-1 rounded text-right text-sm",style:{background:"var(--surface)",border:"1px solid var(--line)",color:"var(--text)"},min:"1",step:"1"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:I,disabled:p,className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium",style:{background:"var(--accent)",color:"var(--text-inverse)"},children:p?"Saving...":"Save Changes"}),e.jsx("button",{onClick:m,disabled:p,className:"px-3 py-2 rounded-lg text-sm font-medium",style:{background:"var(--surface)",border:"1px solid var(--line)",color:"var(--text)"},children:"Cancel"})]})]}):e.jsxs("div",{className:"rounded-lg p-3 space-y-2 text-sm",style:{background:"var(--surface-2)"},children:[a.from_token&&a.to_token&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Pair"}),e.jsxs("span",{style:{color:"var(--text)"},children:[a.from_token," → ",a.to_token]})]}),a.amount_usd>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Amount"}),e.jsxs("span",{style:{color:"var(--text)"},children:["$",a.amount_usd]})]}),a.frequency&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Frequency"}),e.jsx("span",{style:{color:"var(--text)"},children:a.frequency})]}),a.maxSlippageBps>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Max slippage"}),e.jsxs("span",{style:{color:"var(--text)"},children:[(a.maxSlippageBps/100).toFixed(1),"%"]})]}),a.maxGasUsd>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{style:{color:"var(--text-muted)"},children:"Max gas"}),e.jsxs("span",{style:{color:"var(--text)"},children:["$",a.maxGasUsd]})]})]})]}),s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",style:{color:"var(--text)"},children:"Description"}),e.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:s.description})]}),j&&e.jsx("div",{className:"rounded-lg p-3 text-sm",style:{background:"var(--error-muted, #fee2e2)",border:"1px solid var(--error)",color:"var(--error)"},children:j}),!b&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[$&&e.jsxs("button",{onClick:o,disabled:p,className:"px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",style:{background:"var(--accent)",color:"var(--text-inverse)"},children:[e.jsx(X,{className:"h-4 w-4"}),p?"Creating...":"Execute Now"]}),L&&e.jsx("button",{onClick:d,className:"px-4 py-2 rounded-lg text-sm font-medium",style:{background:"var(--warning)",color:"white"},children:"Pause"}),D&&e.jsx("button",{onClick:l,className:"px-4 py-2 rounded-lg text-sm font-medium",style:{background:"var(--success)",color:"white"},children:"Activate"}),U&&e.jsx("button",{onClick:i,className:"px-4 py-2 rounded-lg text-sm font-medium",style:{background:"var(--error)",color:"white"},children:"Delete"})]})]})}function T({label:s,value:d}){return e.jsxs("div",{className:"rounded-lg p-3",style:{background:"var(--surface-2)"},children:[e.jsx("p",{className:"text-xs mb-1",style:{color:"var(--text-muted)"},children:s}),e.jsx("p",{className:"text-sm font-medium",style:{color:"var(--text)"},children:d})]})}export{Le as StrategiesWidget};
