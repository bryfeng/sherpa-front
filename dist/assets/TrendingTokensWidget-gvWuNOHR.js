import{dI as e,dJ as A,dK as E,dL as $,dM as F,dN as g,dO as I,dP as O,dQ as U,dR as W,dS as f,dT as _,dU as D,dV as G}from"./index-vTXeJqHX.js";const q={1:{name:"Ethereum",nativeSymbol:"ETH"},10:{name:"Optimism",nativeSymbol:"ETH"},25:{name:"Cronos",nativeSymbol:"CRO"},56:{name:"BNB Smart Chain",nativeSymbol:"BNB"},100:{name:"Gnosis",nativeSymbol:"xDAI"},137:{name:"Polygon",nativeSymbol:"MATIC"},250:{name:"Fantom",nativeSymbol:"FTM"},324:{name:"zkSync Era",nativeSymbol:"ETH"},8453:{name:"Base",nativeSymbol:"ETH"},42161:{name:"Arbitrum",nativeSymbol:"ETH"},42220:{name:"Celo",nativeSymbol:"CELO"},43114:{name:"Avalanche",nativeSymbol:"AVAX"}};function w(r){if(!r)return null;const l=q[r];return l?l.name:`Chain ${r}`}const R="text-[#0c6f56]",B="text-[#d3355c]";function L({tokens:r,fetchedAt:l,error:m,onInsertQuickPrompt:i,showHotspots:h=!0,limitHotspots:b=3,compact:x=!1}){if(m&&r.length===0)return e.jsx(A,{message:m});if(!r.length)return e.jsx("div",{className:"text-sm",style:{color:"var(--muted)"},children:"No trending tokens right now. Ask Sherpa for fresh market intel."});const o=(s,a)=>{if(typeof s!="number"||Number.isNaN(s))return"—";const n=a??{maximumFractionDigits:s>=1?2:4};return`$${s.toLocaleString(void 0,n)}`},t=s=>typeof s!="number"||Number.isNaN(s)?null:`${s>=0?"+":""}${s.toFixed(2)}%`,d=(()=>{if(!h)return[];const s=new Map;for(const a of r){if(!a.chain_id)continue;const n=s.get(a.chain_id)||{chainId:a.chain_id,count:0};n.count+=1,s.set(a.chain_id,n)}return Array.from(s.values()).map(a=>({...a,name:w(a.chainId)||`Chain ${a.chainId}`})).sort((a,n)=>n.count-a.count).slice(0,b)})();return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["Sherpa tracks high-velocity assets across Relay-supported chains.",l&&` Updated ${E(l)}.`]}),d.length>0&&e.jsxs($,{tone:"accent",className:"text-xs",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2 font-medium",children:[e.jsx(F,{className:"h-3.5 w-3.5"})," Cross-chain hotspots"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(s=>e.jsxs(g,{variant:"secondary",onClick:()=>{if(i){const a=`Bridge funds to ${s.name} so I can trade the trending opportunities Sherpa surfaced.`;i(a)}},disabled:!i,className:"border-primary-200 bg-white/70 text-primary-900 hover:bg-white",children:[e.jsx(I,{className:"h-3.5 w-3.5","aria-hidden":"true"}),e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-[11px] text-primary-700",children:[s.count," tokens"]})]},s.chainId))})]}),e.jsx("div",{className:"space-y-3",children:r.map(s=>{var j,y;const a=w(s.chain_id),n=o(s.price_usd),u=t(s.change_24h),c=u&&u.startsWith("+")?R:B,v=o(s.volume_24h,{maximumFractionDigits:0}),N=s.contract_address&&s.contract_address.startsWith("0x")?O(s.contract_address,6):null,p=(()=>{var S,T;const C=a?`Grab a Relay swap quote to buy ${((S=s.symbol)==null?void 0:S.toUpperCase())||s.name} on ${a}.`:`Grab a Relay swap quote for ${((T=s.symbol)==null?void 0:T.toUpperCase())||s.name}.`;return s.contract_address?`${C} Use contract ${s.contract_address}.`:C})(),H=a?`Bridge funds to ${a} so I can rotate into ${((j=s.symbol)==null?void 0:j.toUpperCase())||s.name}.`:`Bridge where needed so I can trade ${((y=s.symbol)==null?void 0:y.toUpperCase())||s.name}.`;return e.jsxs($,{shadow:!0,className:`${x?"space-y-2":""}`,children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name||s.symbol}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[e.jsx("span",{children:String(s.symbol||"").toUpperCase()}),a&&e.jsxs("span",{children:["• ",a]}),N&&e.jsx("span",{className:"text-slate-400",children:N})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:n}),u&&e.jsx("div",{className:`text-xs font-semibold ${c}`,children:u})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500 flex flex-wrap items-center gap-3",children:[v!=="—"&&e.jsxs("span",{children:["24h vol ",v]}),typeof s.market_cap=="number"&&!Number.isNaN(s.market_cap)&&e.jsxs("span",{children:["MCap ",o(s.market_cap,{maximumFractionDigits:0})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxs(g,{onClick:()=>i&&i(p),disabled:!i,children:[e.jsx(U,{className:"h-3.5 w-3.5"}),"Ask for swap quote"]}),e.jsxs(g,{variant:"secondary",onClick:()=>i&&i(H),disabled:!i,children:[e.jsx(W,{className:"h-3.5 w-3.5"}),"Plan bridge"]})]})]},s.id||`${s.symbol}-${s.chain_id||"unknown"}`)})})]})}function z({tokens:r,fetchedAt:l,onInsertQuickPrompt:m,onViewAll:i,error:h}){if(h&&r.length===0)return e.jsx(A,{message:h});const b=t=>typeof t!="number"||Number.isNaN(t)?null:`${t>=0?"+":""}${t.toFixed(2)}%`,x=r.slice(0,3),o=t=>{var a,n;const d=w(t.chain_id),s=d?`Grab a Relay swap quote to buy ${((a=t.symbol)==null?void 0:a.toUpperCase())||t.name} on ${d}.`:`Grab a Relay swap quote for ${((n=t.symbol)==null?void 0:n.toUpperCase())||t.name}.`;return t.contract_address?`${s} Use contract ${t.contract_address}.`:s};return x.length?e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#1e66f5] via-[#36a2f5] to-[#9fd7ff] p-5 text-white shadow-xl",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[inherit] border border-white/20"}),e.jsxs("div",{className:"relative flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.24em] text-white/80",children:"Trending right now"}),e.jsx("div",{className:"text-xl font-semibold leading-tight",children:"Relay-ready tokens"}),l&&e.jsxs("div",{className:"text-[11px] text-white/80",children:["Updated ",E(l)]})]}),e.jsx(g,{variant:"secondary",onClick:i,disabled:!i,className:"border-white/30 bg-white/90 px-4 py-2 text-[#0e4a88] hover:bg-white disabled:opacity-60",children:"View feed"})]}),e.jsx("div",{className:"relative mt-4 flex flex-wrap gap-2",children:x.map(t=>{var n;const d=b(t.change_24h),s=o(t),a=d&&d.startsWith("+")?R:B;return e.jsxs(g,{variant:"ghost",onClick:()=>m&&m(s),disabled:!m,className:"border-white/50 bg-white/15 px-4 py-2 text-white backdrop-blur-sm hover:bg-white/20 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"font-semibold tracking-wide text-white",children:((n=t.symbol)==null?void 0:n.toUpperCase())||t.name}),d&&e.jsx("span",{className:`text-[11px] font-semibold ${a}`,children:d})]},`${t.id||t.symbol}-${t.chain_id||"na"}`)})})]}):e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-[#1e66f5] via-[#36a2f5] to-[#9fd7ff] p-5 text-white shadow-xl",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-[inherit] border border-white/20"}),e.jsxs("div",{className:"relative flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.24em] text-white/80",children:"Trending signals"}),e.jsx("div",{className:"text-lg font-semibold",children:"No active tokens right now"})]}),i&&e.jsx(g,{variant:"secondary",onClick:i,className:"border-white/30 bg-white/90 px-4 py-2 text-[#0e4a88] hover:bg-white",children:"Ask Sherpa"})]}),e.jsx("div",{className:"relative mt-3 text-sm text-white/85",children:"Prompt Sherpa for a fresh scan to surface new opportunities."})]})}function M({limit:r=6,autoRefreshMs:l=6e4,onInsertQuickPrompt:m,className:i=""}){const[h,b]=f.useState([]),[x,o]=f.useState("idle"),[t,d]=f.useState(null),[s,a]=f.useState(null),n=f.useCallback(async()=>{o(c=>c==="ready"?c:"loading"),d(null);try{const c=await _(r);b(c),a(new Date().toISOString()),o("ready")}catch(c){d((c==null?void 0:c.message)||"Unable to load trending tokens."),o("error")}},[r]);f.useEffect(()=>{let c=!1;if((async()=>{o("loading");try{const p=await _(r);if(c)return;b(p),a(new Date().toISOString()),o("ready")}catch(p){if(c)return;d((p==null?void 0:p.message)||"Unable to load trending tokens."),o("error")}})().catch(()=>{}),!l)return()=>{c=!0};const N=window.setInterval(()=>{n().catch(()=>{})},l);return()=>{c=!0,window.clearInterval(N)}},[l,r,n]);const u=x==="loading"&&h.length===0;return e.jsxs(D,{className:`${i}`,children:[e.jsx(G,{title:"Trending Tokens",subtitle:"Relay-ready ideas surfaced by Sherpa",actions:e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>n().catch(()=>{}),title:"Refresh","aria-label":"Refresh trending tokens",children:e.jsx(U,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"mt-3",children:[u?e.jsx("div",{className:"space-y-2",children:[...Array(3)].map((c,v)=>e.jsx("div",{className:"h-16 animate-pulse rounded-xl bg-slate-100"},v))}):e.jsx(L,{tokens:h,fetchedAt:s||void 0,error:t||void 0,onInsertQuickPrompt:m,showHotspots:!l||l>=3e4,limitHotspots:2,compact:!0}),x==="error"&&t&&e.jsx("div",{className:"mt-2 text-xs text-rose-600",children:t})]})]})}export{z as TrendingTokensBanner,L as TrendingTokensList,M as TrendingTokensWidget};
