import{e5 as le,dS as h,dI as e,e6 as ve,e7 as F,e8 as ye,e9 as ne,dQ as je,dJ as we}from"./index-B93ll933.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=le("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=le("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]),Se="inline-flex items-center gap-2 rounded-full border border-[var(--line)] bg-[var(--surface-2)] px-3 py-1 text-[11px] font-semibold text-[var(--text)] transition hover:bg-[var(--hover)]",ie={section:"rounded-2xl border border-[var(--line)] bg-[var(--surface)] p-4 text-[var(--text)] shadow-sm",statCard:"rounded-2xl border border-[var(--line)] bg-[var(--surface-2)] p-4 space-y-1 text-[var(--text)]",statLabel:"text-[10px] uppercase tracking-[0.24em] text-[var(--text-muted)]",statValue:"text-lg font-semibold text-[var(--text)]",statHelper:"text-xs text-[var(--text-muted)]",helper:"text-[var(--text-muted)]",chip:{base:Se,active:"bg-[var(--accent)] text-[var(--text-inverse)] border-transparent shadow-sm hover:bg-[var(--accent-600)]"},metaChip:"inline-flex items-center gap-1 rounded-full border border-[var(--line)] bg-[var(--surface-2)] px-3 py-1 text-[10px] font-medium text-[var(--text-muted)]",summaryCard:"rounded-2xl border border-[var(--line)] bg-[var(--surface-2)] px-4 py-3 text-xs text-[var(--text)] flex items-center justify-between gap-3",summaryValue:"font-mono text-sm text-[var(--text)] truncate",toggle:"inline-flex items-center gap-1 rounded-full border border-[var(--line)] bg-[var(--surface-2)] px-2.5 py-1 text-[11px] font-semibold text-[var(--text-muted)] transition hover:bg-[var(--hover)]",promptPill:"inline-flex items-center gap-2 rounded-full border border-[var(--line)] bg-[var(--surface-2)] px-3 py-1.5 text-xs font-semibold text-[var(--text)] hover:bg-[var(--hover)]",actionPrimary:"inline-flex items-center justify-center gap-2 rounded-full bg-[var(--accent)] px-5 py-2.5 text-sm font-semibold text-[var(--text-inverse)] shadow-sm transition hover:bg-[var(--accent-600)] disabled:cursor-not-allowed disabled:opacity-60",actionSecondary:"inline-flex items-center justify-center gap-2 rounded-full border border-[var(--line)] bg-[var(--surface-2)] px-5 py-2.5 text-sm font-semibold text-[var(--text)] transition hover:bg-[var(--hover)] disabled:cursor-not-allowed disabled:opacity-60",ghostAction:"inline-flex items-center justify-center gap-2 rounded-full border border-transparent bg-transparent px-3 py-1 text-xs font-semibold text-[var(--text-muted)] hover:bg-[var(--hover)] disabled:cursor-not-allowed disabled:opacity-40",warningSection:"rounded-2xl border border-[rgba(255,204,102,.35)] bg-[rgba(255,204,102,.12)] p-4 text-xs text-[var(--warning)]",errorText:"text-[var(--danger)]",successText:"text-[var(--success)]"},ke={swap:{container:"relative rounded-[24px] border border-[var(--line)] bg-[var(--surface)] p-5 text-[var(--text)] shadow-lg overflow-hidden",border:"border-[var(--line)]",overlays:["absolute -left-16 top-12 h-48 w-48 rounded-full bg-[rgba(90,164,255,.18)] blur-[80px]","absolute right-[-40px] top-14 h-44 w-44 rounded-full bg-[rgba(41,127,240,.16)] blur-[70px]","absolute bottom-[-60px] left-24 h-60 w-60 rounded-full bg-[rgba(90,164,255,.12)] blur-[100px]"],label:"text-[var(--text-muted)]",accent:{positive:"text-[var(--success)]",negative:"text-[var(--danger)]",neutral:"text-[var(--text)]"},...ie},bridge:{container:"relative rounded-[24px] border border-[var(--line)] bg-[var(--surface)] p-5 text-[var(--text)] shadow-lg overflow-hidden",border:"border-[var(--line)]",overlays:["absolute -left-20 top-10 h-52 w-52 rounded-full bg-[rgba(41,127,240,.18)] blur-[90px]","absolute right-[-50px] top-20 h-48 w-48 rounded-full bg-[rgba(90,164,255,.16)] blur-[80px]","absolute bottom-[-70px] left-28 h-64 w-64 rounded-full bg-[rgba(90,164,255,.12)] blur-[100px]"],label:"text-[var(--text-muted)]",accent:{positive:"text-[var(--success)]",negative:"text-[var(--danger)]",neutral:"text-[var(--text)]"},...ie}};function Ce({panel:q,walletAddress:V,walletReady:oe=!1,onExecuteQuote:_,onRefreshQuote:S,onInsertQuickPrompt:H,controls:c}){var te,se,ae;const s=q.payload||{},k=s.breakdown||{},C=k.output||{},A=k.fees||{},d=Array.isArray(s.instructions)?s.instructions.map(t=>String(t)):[],z=Array.isArray(s.issues)?s.issues:[],B=s.actions&&typeof s.actions=="object"?s.actions:null,u=B?Object.entries(B).map(([t,r])=>({key:t,label:String(r||"").trim()})).filter(t=>t.label.length>0):[],ce=typeof k.eta_seconds=="number"?k.eta_seconds:void 0,b=typeof((te=s.wallet)==null?void 0:te.address)=="string"?s.wallet.address:void 0,x=(typeof s.quote_type=="string"?s.quote_type.toLowerCase():q.id==="relay_swap_quote"?"swap":"bridge")==="swap",de=x?"swap":"bridge",Q=x?"Swap":"Bridge",D=x?"swapping":"bridging",ue=x?"Swapping…":"Bridging…",[I,W]=h.useState(!1),[L,O]=h.useState(!1),[U,M]=h.useState(null),[G,J]=h.useState(null),[g,xe]=h.useState(!1),[f,pe]=h.useState(!1),p=s.quote_expiry;let l;if(typeof p=="string"){const t=Date.parse(p);Number.isNaN(t)||(l=t)}else if(p){const t=p.iso||p.ISO;if(t){const r=Date.parse(String(t));Number.isNaN(r)||(l=r)}if(typeof l>"u"){const r=p.epoch??p.EPOCH;if(typeof r<"u"){const n=Number(r);Number.isFinite(n)&&(l=n>1e12?n:n*1e3)}}}const R=typeof l=="number"?new Date(l):void 0,T=typeof l=="number"?l<=Date.now():!1,v=!!(V&&b&&V.toLowerCase()!==b.toLowerCase()),K=t=>{if(typeof t=="number")return t;if(typeof t=="string"&&t.trim().length){const r=Number(t);if(Number.isFinite(r))return r}},P=t=>{const r=K(t);if(typeof r!="number")return"—";const i=Math.abs(r)>=1?{minimumFractionDigits:2,maximumFractionDigits:2}:{minimumFractionDigits:2,maximumFractionDigits:4};return`$${r.toLocaleString(void 0,i)}`},X=(()=>{var j,$,re;const t=C.amount_estimate||C.amount||((j=s.output)==null?void 0:j.amount),r=C.symbol||((re=($=s.output)==null?void 0:$.token)==null?void 0:re.symbol);if(!t)return r?`— ${r}`:"—";const n=K(t),i=typeof n=="number"?n.toLocaleString(void 0,{maximumFractionDigits:6}):String(t);return r?`${i} ${r}`:i})(),E=((se=s.usd_estimates)==null?void 0:se.output)||C.value_usd,me=((ae=s.usd_estimates)==null?void 0:ae.gas)||A.gas_usd,he=t=>{if(!t||t<=0)return"—";if(t<60)return`${Math.round(t)}s`;const r=Math.round(t/60);if(r<60)return`${r} min`;const n=Math.round(r/60);if(n<24)return`${n} hr`;const i=Math.round(n/24);return`${i} day${i>1?"s":""}`},Y=()=>{if(!l)return"—";const t=l-Date.now(),r=Math.abs(t),n=t>=0?"in ":"";if(r<6e4)return t>=0?"in under a minute":"expired just now";const i=Math.round(r/6e4);if(i<60)return`${n}${i} min${t<0?" ago":""}`;const j=Math.round(i/60);if(j<24)return`${n}${j} hr${t<0?" ago":""}`;const $=Math.round(j/24);return`${n}${$} day${$>1?"s":""}${t<0?" ago":""}`},w=oe?s.tx?s.status!=="ok"?"Quote is incomplete. Ask for a refresh.":T?`Quote expired. Refresh before ${D}.`:v?"Connect the wallet that requested this quote.":null:"Quote did not include a prepared transaction.":`Connect a wallet to ${de}.`,Z=!w&&!!_,be=async()=>{if(!(!_||!Z)){W(!0),M(null),J(null);try{const t=await _(q);typeof t=="string"&&t&&J(t)}catch(t){M((t==null?void 0:t.message)||`${Q} transaction failed.`)}finally{W(!1)}}},ee=async()=>{if(S){O(!0),M(null);try{await S()}catch(t){M((t==null?void 0:t.message)||"Failed to refresh quote.")}finally{O(!1)}}},N=Array.isArray(s==null?void 0:s.routes)?s.routes.length:Array.isArray(s==null?void 0:s.path)?s.path.length:void 0,a=ke[x?"swap":"bridge"],o=!!(c!=null&&c.collapsed),ge=a.overlays.map((t,r)=>e.jsx("div",{className:`pointer-events-none ${t}`},r)),fe=b?`${b.slice(0,6)}…${b.slice(-4)}`:"—",y=({label:t,value:r,helper:n,tone:i="neutral"})=>e.jsxs("div",{className:a.statCard,children:[e.jsx("div",{className:a.statLabel,children:t}),e.jsx("div",{className:`${a.statValue} ${i==="danger"?a.accent.negative:"text-white"}`,children:r}),n&&e.jsx("div",{className:`${a.statHelper} ${i==="danger"?a.accent.negative:""}`,children:n})]}),m=[];return x?m.push("Swap"):m.push("Bridge"),N&&m.push(`${N} hop${N>1?"s":""}`),s!=null&&s.chain?m.push(String(s.chain)):s!=null&&s.network&&m.push(String(s.network)),e.jsxs("div",{className:`relative overflow-hidden ${a.container}`,children:[e.jsx("div",{className:`pointer-events-none absolute inset-0 rounded-[inherit] border ${a.border}`}),c&&e.jsxs("div",{className:"absolute right-4 top-4 z-20 flex items-center gap-2",children:[e.jsx("div",{className:`${a.ghostAction} h-9 w-9 items-center justify-center`,title:"Reorder",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:c.onToggleCollapse,className:`${a.ghostAction} h-9 w-9 items-center justify-center`,title:c.collapsed?"Expand panel":"Minimize panel",children:c.collapsed?e.jsx(ve,{className:"h-4 w-4"}):e.jsx(F,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:c.onExpand,className:`${a.ghostAction} h-9 w-9 items-center justify-center`,title:"Expand",children:e.jsx(ye,{className:"h-4 w-4"})})]}),ge,e.jsxs("div",{className:"relative space-y-4 text-sm text-white/85",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.28em] ${a.label}`,children:x?"Swap quote":"Bridge quote"}),e.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:(s==null?void 0:s.title)||"Relay execution summary"}),e.jsx("div",{className:`mt-1 text-xs ${a.helper}`,children:(s==null?void 0:s.description)||(x?"Sherpa tuned a best-route swap path ready for Relay.":"Sherpa tuned a best-route bridge path ready for Relay.")})]}),m.length>0&&e.jsx("div",{className:`flex flex-wrap justify-end gap-2 ${o?"opacity-80":""}`,children:m.map((t,r)=>e.jsx("span",{className:a.metaChip,children:t},r))})]}),o?e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(y,{label:"Estimated Output",value:X,helper:E?P(E):void 0}),e.jsx(y,{label:"Quote Expiry",value:R?R.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):"—",helper:l?Y():void 0,tone:T?"danger":"neutral"})]}):e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(y,{label:"Estimated Output",value:X,helper:E?P(E):void 0}),e.jsx(y,{label:"Fees",value:P(me),helper:typeof A.slippage_percent=="number"?`Slippage ${A.slippage_percent}%`:void 0}),e.jsx(y,{label:"ETA",value:he(ce),helper:N?`${N} step path`:void 0}),e.jsx(y,{label:"Quote Expiry",value:R?R.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):"—",helper:l?Y():void 0,tone:T?"danger":"neutral"})]}),o?e.jsxs("div",{className:`${a.summaryCard} ${v?"border-amber-400 bg-amber-300/25 text-amber-100":""}`,children:[e.jsx("div",{className:`${a.statLabel} text-[10px]`,children:"Destination Wallet"}),e.jsx("div",{className:a.summaryValue,children:fe})]}):e.jsxs("div",{className:`${a.section} ${v?"border-amber-400 bg-amber-300/20 text-amber-100":""}`,children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.2em] ${v?"text-amber-100":a.label}`,children:"Destination Wallet"}),e.jsx("div",{className:"mt-2 break-all font-mono text-sm text-white",children:b||"—"}),v&&e.jsxs("div",{className:"mt-2 text-xs",children:["Connected wallet differs from the quote wallet. Switch wallets before ",D,"."]})]}),o&&v&&e.jsxs("div",{className:"text-[10px] text-amber-200/80",children:["Switch wallets before ",D,"."]}),o&&(d.length>0||u.length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px] text-white/75",children:[d.length>0&&e.jsxs("span",{className:a.metaChip,children:["Instructions ",d.length]}),u.length>0&&e.jsxs("span",{className:a.metaChip,children:["Prompts ",u.length]})]}),z.length>0&&e.jsxs("div",{className:a.warningSection,children:[e.jsx("div",{className:"font-semibold uppercase tracking-wide",children:"Needs attention"}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-4",children:z.map((t,r)=>e.jsx("li",{children:String(t)},r))})]}),!o&&d.length>0&&e.jsxs("div",{className:`${a.section} space-y-3`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.2em] ${a.label}`,children:"Instructions"}),e.jsxs("button",{type:"button",onClick:()=>xe(t=>!t),className:`${a.chip.base} ${g?a.chip.active:""}`,"aria-expanded":g,children:[g?e.jsx(F,{className:"h-3.5 w-3.5"}):e.jsx(ne,{className:"h-3.5 w-3.5"}),g?"Hide":`${d.length}`]})]}),!g&&d[0]&&e.jsx("div",{className:`truncate text-xs ${a.helper}`,children:d[0]}),g&&e.jsx("ul",{className:"space-y-2 text-sm text-white/90",children:d.map((t,r)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/60"}),e.jsx("span",{children:t})]},r))})]}),!o&&u.length>0&&e.jsxs("div",{className:`${a.section} space-y-3`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.2em] ${a.label}`,children:"Quick prompts"}),e.jsxs("button",{type:"button",onClick:()=>pe(t=>!t),className:`${a.chip.base} ${f?a.chip.active:""}`,"aria-expanded":f,children:[f?e.jsx(F,{className:"h-3.5 w-3.5"}):e.jsx(ne,{className:"h-3.5 w-3.5"}),f?"Hide":`${u.length}`]})]}),!f&&u[0]&&e.jsx("div",{className:`truncate text-xs ${a.helper}`,children:u[0].label}),f&&e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(({key:t,label:r})=>e.jsxs("button",{type:"button",className:`${a.promptPill} max-w-[220px] truncate`,onClick:()=>{H&&H(r)},title:r,children:[e.jsx($e,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"truncate",children:r})]},t))})]}),!o&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("button",{type:"button",className:a.actionPrimary,onClick:be,disabled:!Z||I,children:I?ue:Q}),S&&e.jsx("button",{type:"button",className:a.actionSecondary,onClick:ee,disabled:L,children:L?"Refreshing…":e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4"}),"Refresh Quote"]})}),w&&e.jsx("span",{className:`text-xs ${a.helper}`,children:w})]}),o&&w&&e.jsx("div",{className:`text-xs ${a.helper}`,children:w}),U&&e.jsx(we,{message:U,onRetry:S?ee:void 0,retryLabel:L?"Refreshing…":"Retry",className:a.section}),G&&e.jsxs("div",{className:`${a.section} text-xs ${a.successText}`,children:["Transaction submitted: ",e.jsx("code",{className:"font-mono",children:G})]})]})]})}const Me=h.memo(Ce);Me.displayName="RelayQuoteWidget";export{Me as RelayQuoteWidget,Me as default};
