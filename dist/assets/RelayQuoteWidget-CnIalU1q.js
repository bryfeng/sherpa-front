import{e3 as oe,dS as m,dI as e,e4 as we,e5 as V,e6 as ye,e7 as ae,dQ as je,dJ as ve}from"./index-vTXeJqHX.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=oe("MessageSquarePlus",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]]),ne="inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] font-semibold text-white/80 backdrop-blur-sm transition hover:bg-white/18",ke={swap:{container:"rounded-[28px] p-5 shadow-xl text-white bg-gradient-to-br from-[#2216ff] via-[#1f63ff] to-[#3af1ff]",border:"border-white/15",overlays:["absolute -left-16 top-12 h-48 w-48 rounded-full bg-[#5b86ff]/30 blur-[80px]","absolute right-[-40px] top-14 h-44 w-44 rounded-full bg-[#23e3ff]/25 blur-[70px]","absolute bottom-[-60px] left-24 h-60 w-60 rounded-full bg-[#1f3fff]/25 blur-[100px]"],section:"rounded-2xl border border-white/15 bg-white/12 backdrop-blur-md text-white/85 p-4",statCard:"rounded-2xl border border-white/18 bg-white/12 backdrop-blur-md p-4 space-y-1 text-white",statLabel:"text-[10px] uppercase tracking-[0.24em] text-white/70",statValue:"text-lg font-semibold text-white",statHelper:"text-xs text-white/65",label:"text-white/75",helper:"text-white/65",accent:{positive:"text-[#80fbd1]",negative:"text-[#ff9cb6]",neutral:"text-white/85"},chip:{base:ne,active:"bg-white text-[#153d98] border-transparent shadow-sm hover:bg-white"},metaChip:"inline-flex items-center gap-1 rounded-full border border-white/25 bg-white/12 px-3 py-1 text-[10px] font-medium text-white/80 backdrop-blur-md",summaryCard:"rounded-2xl border border-white/18 bg-white/10 backdrop-blur-md px-4 py-3 text-xs text-white/75 flex items-center justify-between gap-3",summaryValue:"font-mono text-sm text-white truncate",toggle:"inline-flex items-center gap-1 rounded-full border border-white/20 bg-white/12 px-2.5 py-1 text-[11px] font-semibold text-white/75 backdrop-blur-sm transition hover:bg-white/18",promptPill:"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/12 px-3 py-1.5 text-xs font-semibold text-white/85 hover:bg-white/20 backdrop-blur-sm",actionPrimary:"inline-flex items-center justify-center gap-2 rounded-full bg-white px-5 py-2.5 text-sm font-semibold text-[#103a8b] shadow-sm transition hover:bg-white/95 disabled:cursor-not-allowed disabled:opacity-60",actionSecondary:"inline-flex items-center justify-center gap-2 rounded-full border border-white/25 bg-white/10 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60",ghostAction:"inline-flex items-center justify-center gap-2 rounded-full border border-white/20 bg-white/8 px-3 py-1 text-xs font-semibold text-white/75 hover:bg-white/14 disabled:cursor-not-allowed disabled:opacity-40",warningSection:"rounded-2xl border border-amber-400/45 bg-amber-300/20 p-4 text-xs text-amber-100 backdrop-blur-sm",errorText:"text-[#ffb7cc]",successText:"text-[#8efad9]"},bridge:{container:"rounded-[28px] p-5 shadow-xl text-white bg-gradient-to-br from-[#05192e] via-[#0c4476] to-[#54d2ff]",border:"border-white/12",overlays:["absolute -left-24 top-10 h-52 w-52 rounded-full bg-[#1e90ff]/25 blur-[95px]","absolute right-[-60px] top-20 h-48 w-48 rounded-full bg-[#5ff4ff]/20 blur-[80px]","absolute bottom-[-80px] left-28 h-64 w-64 rounded-full bg-[#0b304f]/35 blur-[110px]"],section:"rounded-2xl border border-white/12 bg-white/10 backdrop-blur-md text-white/85 p-4",statCard:"rounded-2xl border border-white/14 bg-white/8 backdrop-blur-md p-4 space-y-1 text-white",statLabel:"text-[10px] uppercase tracking-[0.24em] text-white/70",statValue:"text-lg font-semibold text-white",statHelper:"text-xs text-white/60",label:"text-white/70",helper:"text-white/60",accent:{positive:"text-[#89f7d2]",negative:"text-[#ffb2c8]",neutral:"text-white/85"},chip:{base:ne,active:"bg-white text-[#0b3d72] border-transparent shadow-sm hover:bg-white"},metaChip:"inline-flex items-center gap-1 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[10px] font-medium text-white/75 backdrop-blur-md",summaryCard:"rounded-2xl border border-white/16 bg-white/10 backdrop-blur-md px-4 py-3 text-xs text-white/70 flex items-center justify-between gap-3",summaryValue:"font-mono text-sm text-white truncate",toggle:"inline-flex items-center gap-1 rounded-full border border-white/18 bg-white/10 px-2.5 py-1 text-[11px] font-semibold text-white/72 backdrop-blur-sm transition hover:bg-white/18",promptPill:"inline-flex items-center gap-2 rounded-full border border-white/18 bg-white/10 px-3 py-1.5 text-xs font-semibold text-white/85 hover:bg-white/20 backdrop-blur-sm",actionPrimary:"inline-flex items-center justify-center gap-2 rounded-full bg-white px-5 py-2.5 text-sm font-semibold text-[#0b3d72] shadow-sm transition hover:bg-white/95 disabled:cursor-not-allowed disabled:opacity-60",actionSecondary:"inline-flex items-center justify-center gap-2 rounded-full border border-white/22 bg-white/10 px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-white/20 disabled:cursor-not-allowed disabled:opacity-60",ghostAction:"inline-flex items-center justify-center gap-2 rounded-full border border-white/18 bg-white/6 px-3 py-1 text-xs font-semibold text-white/70 hover:bg-white/12 disabled:cursor-not-allowed disabled:opacity-40",warningSection:"rounded-2xl border border-amber-400/40 bg-amber-300/18 p-4 text-xs text-amber-100 backdrop-blur-sm",errorText:"text-[#ffb7cc]",successText:"text-[#8efad9]"}};function Se({panel:q,walletAddress:F,walletReady:le=!1,onExecuteQuote:A,onRefreshQuote:k,onInsertQuickPrompt:H,controls:c}){var te,se,ie;const s=q.payload||{},S=s.breakdown||{},C=S.output||{},_=S.fees||{},d=Array.isArray(s.instructions)?s.instructions.map(t=>String(t)):[],z=Array.isArray(s.issues)?s.issues:[],B=s.actions&&typeof s.actions=="object"?s.actions:null,u=B?Object.entries(B).map(([t,r])=>({key:t,label:String(r||"").trim()})).filter(t=>t.label.length>0):[],ce=typeof S.eta_seconds=="number"?S.eta_seconds:void 0,b=typeof((te=s.wallet)==null?void 0:te.address)=="string"?s.wallet.address:void 0,x=(typeof s.quote_type=="string"?s.quote_type.toLowerCase():q.id==="relay_swap_quote"?"swap":"bridge")==="swap",de=x?"swap":"bridge",Q=x?"Swap":"Bridge",D=x?"swapping":"bridging",ue=x?"Swapping…":"Bridging…",[I,W]=m.useState(!1),[L,O]=m.useState(!1),[U,M]=m.useState(null),[G,J]=m.useState(null),[f,xe]=m.useState(!1),[g,pe]=m.useState(!1),p=s.quote_expiry;let o;if(typeof p=="string"){const t=Date.parse(p);Number.isNaN(t)||(o=t)}else if(p){const t=p.iso||p.ISO;if(t){const r=Date.parse(String(t));Number.isNaN(r)||(o=r)}if(typeof o>"u"){const r=p.epoch??p.EPOCH;if(typeof r<"u"){const a=Number(r);Number.isFinite(a)&&(o=a>1e12?a:a*1e3)}}}const R=typeof o=="number"?new Date(o):void 0,T=typeof o=="number"?o<=Date.now():!1,w=!!(F&&b&&F.toLowerCase()!==b.toLowerCase()),K=t=>{if(typeof t=="number")return t;if(typeof t=="string"&&t.trim().length){const r=Number(t);if(Number.isFinite(r))return r}},P=t=>{const r=K(t);if(typeof r!="number")return"—";const n=Math.abs(r)>=1?{minimumFractionDigits:2,maximumFractionDigits:2}:{minimumFractionDigits:2,maximumFractionDigits:4};return`$${r.toLocaleString(void 0,n)}`},X=(()=>{var j,$,re;const t=C.amount_estimate||C.amount||((j=s.output)==null?void 0:j.amount),r=C.symbol||((re=($=s.output)==null?void 0:$.token)==null?void 0:re.symbol);if(!t)return r?`— ${r}`:"—";const a=K(t),n=typeof a=="number"?a.toLocaleString(void 0,{maximumFractionDigits:6}):String(t);return r?`${n} ${r}`:n})(),E=((se=s.usd_estimates)==null?void 0:se.output)||C.value_usd,he=((ie=s.usd_estimates)==null?void 0:ie.gas)||_.gas_usd,me=t=>{if(!t||t<=0)return"—";if(t<60)return`${Math.round(t)}s`;const r=Math.round(t/60);if(r<60)return`${r} min`;const a=Math.round(r/60);if(a<24)return`${a} hr`;const n=Math.round(a/24);return`${n} day${n>1?"s":""}`},Y=()=>{if(!o)return"—";const t=o-Date.now(),r=Math.abs(t),a=t>=0?"in ":"";if(r<6e4)return t>=0?"in under a minute":"expired just now";const n=Math.round(r/6e4);if(n<60)return`${a}${n} min${t<0?" ago":""}`;const j=Math.round(n/60);if(j<24)return`${a}${j} hr${t<0?" ago":""}`;const $=Math.round(j/24);return`${a}${$} day${$>1?"s":""}${t<0?" ago":""}`},v=le?s.tx?s.status!=="ok"?"Quote is incomplete. Ask for a refresh.":T?`Quote expired. Refresh before ${D}.`:w?"Connect the wallet that requested this quote.":null:"Quote did not include a prepared transaction.":`Connect a wallet to ${de}.`,Z=!v&&!!A,be=async()=>{if(!(!A||!Z)){W(!0),M(null),J(null);try{const t=await A(q);typeof t=="string"&&t&&J(t)}catch(t){M((t==null?void 0:t.message)||`${Q} transaction failed.`)}finally{W(!1)}}},ee=async()=>{if(k){O(!0),M(null);try{await k()}catch(t){M((t==null?void 0:t.message)||"Failed to refresh quote.")}finally{O(!1)}}},N=Array.isArray(s==null?void 0:s.routes)?s.routes.length:Array.isArray(s==null?void 0:s.path)?s.path.length:void 0,i=ke[x?"swap":"bridge"],l=!!(c!=null&&c.collapsed),fe=i.overlays.map((t,r)=>e.jsx("div",{className:`pointer-events-none ${t}`},r)),ge=b?`${b.slice(0,6)}…${b.slice(-4)}`:"—",y=({label:t,value:r,helper:a,tone:n="neutral"})=>e.jsxs("div",{className:i.statCard,children:[e.jsx("div",{className:i.statLabel,children:t}),e.jsx("div",{className:`${i.statValue} ${n==="danger"?i.accent.negative:"text-white"}`,children:r}),a&&e.jsx("div",{className:`${i.statHelper} ${n==="danger"?i.accent.negative:""}`,children:a})]}),h=[];return x?h.push("Swap"):h.push("Bridge"),N&&h.push(`${N} hop${N>1?"s":""}`),s!=null&&s.chain?h.push(String(s.chain)):s!=null&&s.network&&h.push(String(s.network)),e.jsxs("div",{className:`relative overflow-hidden ${i.container}`,children:[e.jsx("div",{className:`pointer-events-none absolute inset-0 rounded-[inherit] border ${i.border}`}),c&&e.jsxs("div",{className:"absolute right-4 top-4 z-20 flex items-center gap-2",children:[e.jsx("div",{className:`${i.ghostAction} h-9 w-9 items-center justify-center`,title:"Reorder",children:e.jsx(Ne,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:c.onToggleCollapse,className:`${i.ghostAction} h-9 w-9 items-center justify-center`,title:c.collapsed?"Expand panel":"Minimize panel",children:c.collapsed?e.jsx(we,{className:"h-4 w-4"}):e.jsx(V,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:c.onExpand,className:`${i.ghostAction} h-9 w-9 items-center justify-center`,title:"Expand",children:e.jsx(ye,{className:"h-4 w-4"})})]}),fe,e.jsxs("div",{className:"relative space-y-4 text-sm text-white/85",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.28em] ${i.label}`,children:x?"Swap quote":"Bridge quote"}),e.jsx("div",{className:"mt-2 text-2xl font-semibold text-white",children:(s==null?void 0:s.title)||"Relay execution summary"}),e.jsx("div",{className:`mt-1 text-xs ${i.helper}`,children:(s==null?void 0:s.description)||(x?"Sherpa tuned a best-route swap path ready for Relay.":"Sherpa tuned a best-route bridge path ready for Relay.")})]}),h.length>0&&e.jsx("div",{className:`flex flex-wrap justify-end gap-2 ${l?"opacity-80":""}`,children:h.map((t,r)=>e.jsx("span",{className:i.metaChip,children:t},r))})]}),l?e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(y,{label:"Estimated Output",value:X,helper:E?P(E):void 0}),e.jsx(y,{label:"Quote Expiry",value:R?R.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):"—",helper:o?Y():void 0,tone:T?"danger":"neutral"})]}):e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(y,{label:"Estimated Output",value:X,helper:E?P(E):void 0}),e.jsx(y,{label:"Fees",value:P(he),helper:typeof _.slippage_percent=="number"?`Slippage ${_.slippage_percent}%`:void 0}),e.jsx(y,{label:"ETA",value:me(ce),helper:N?`${N} step path`:void 0}),e.jsx(y,{label:"Quote Expiry",value:R?R.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}):"—",helper:o?Y():void 0,tone:T?"danger":"neutral"})]}),l?e.jsxs("div",{className:`${i.summaryCard} ${w?"border-amber-400 bg-amber-300/25 text-amber-100":""}`,children:[e.jsx("div",{className:`${i.statLabel} text-[10px]`,children:"Destination Wallet"}),e.jsx("div",{className:i.summaryValue,children:ge})]}):e.jsxs("div",{className:`${i.section} ${w?"border-amber-400 bg-amber-300/20 text-amber-100":""}`,children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.2em] ${w?"text-amber-100":i.label}`,children:"Destination Wallet"}),e.jsx("div",{className:"mt-2 break-all font-mono text-sm text-white",children:b||"—"}),w&&e.jsxs("div",{className:"mt-2 text-xs",children:["Connected wallet differs from the quote wallet. Switch wallets before ",D,"."]})]}),l&&w&&e.jsxs("div",{className:"text-[10px] text-amber-200/80",children:["Switch wallets before ",D,"."]}),l&&(d.length>0||u.length>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px] text-white/75",children:[d.length>0&&e.jsxs("span",{className:i.metaChip,children:["Instructions ",d.length]}),u.length>0&&e.jsxs("span",{className:i.metaChip,children:["Prompts ",u.length]})]}),z.length>0&&e.jsxs("div",{className:i.warningSection,children:[e.jsx("div",{className:"font-semibold uppercase tracking-wide",children:"Needs attention"}),e.jsx("ul",{className:"mt-2 list-disc space-y-1 pl-4",children:z.map((t,r)=>e.jsx("li",{children:String(t)},r))})]}),!l&&d.length>0&&e.jsxs("div",{className:`${i.section} space-y-3`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.2em] ${i.label}`,children:"Instructions"}),e.jsxs("button",{type:"button",onClick:()=>xe(t=>!t),className:`${i.chip.base} ${f?i.chip.active:""}`,"aria-expanded":f,children:[f?e.jsx(V,{className:"h-3.5 w-3.5"}):e.jsx(ae,{className:"h-3.5 w-3.5"}),f?"Hide":`${d.length}`]})]}),!f&&d[0]&&e.jsx("div",{className:`truncate text-xs ${i.helper}`,children:d[0]}),f&&e.jsx("ul",{className:"space-y-2 text-sm text-white/90",children:d.map((t,r)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/60"}),e.jsx("span",{children:t})]},r))})]}),!l&&u.length>0&&e.jsxs("div",{className:`${i.section} space-y-3`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:`text-[11px] uppercase tracking-[0.2em] ${i.label}`,children:"Quick prompts"}),e.jsxs("button",{type:"button",onClick:()=>pe(t=>!t),className:`${i.chip.base} ${g?i.chip.active:""}`,"aria-expanded":g,children:[g?e.jsx(V,{className:"h-3.5 w-3.5"}):e.jsx(ae,{className:"h-3.5 w-3.5"}),g?"Hide":`${u.length}`]})]}),!g&&u[0]&&e.jsx("div",{className:`truncate text-xs ${i.helper}`,children:u[0].label}),g&&e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(({key:t,label:r})=>e.jsxs("button",{type:"button",className:`${i.promptPill} max-w-[220px] truncate`,onClick:()=>{H&&H(r)},title:r,children:[e.jsx($e,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"truncate",children:r})]},t))})]}),!l&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("button",{type:"button",className:i.actionPrimary,onClick:be,disabled:!Z||I,children:I?ue:Q}),k&&e.jsx("button",{type:"button",className:i.actionSecondary,onClick:ee,disabled:L,children:L?"Refreshing…":e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4"}),"Refresh Quote"]})}),v&&e.jsx("span",{className:`text-xs ${i.helper}`,children:v})]}),l&&v&&e.jsx("div",{className:`text-xs ${i.helper}`,children:v}),U&&e.jsx(ve,{message:U,onRetry:k?ee:void 0,retryLabel:L?"Refreshing…":"Retry",className:i.section}),G&&e.jsxs("div",{className:`${i.section} text-xs ${i.successText}`,children:["Transaction submitted: ",e.jsx("code",{className:"font-mono",children:G})]})]})]})}const Ce=m.memo(Se);Ce.displayName="RelayQuoteWidget";export{Ce as RelayQuoteWidget,Ce as default};
