import{P as m,bY as y,bL as w,a8 as x,b_ as p,cm as z,cj as M,eI as P,cl as l,eJ as k,a0 as L,eK as T,a7 as A,eL as C,bA as E,cf as N,l as S,m as B,eM as _}from"./index-DkD0KfRO.js";function R(t,e){if(t.length!==e.length)throw new m({expectedLength:t.length,givenLength:e.length});const i=[];for(let n=0;n<t.length;n++){const u=t[n],c=e[n];i.push(b(u,c))}return y(i)}function b(t,e,i=!1){if(t==="address"){const s=e;if(!w(s))throw new x({address:s});return p(s.toLowerCase(),{size:i?32:null})}if(t==="string")return z(e);if(t==="bytes")return e;if(t==="bool")return p(M(e),{size:i?32:1});const n=t.match(P);if(n){const[s,r,o="256"]=n,a=Number.parseInt(o,10)/8;return l(e,{size:i?32:a,signed:r==="int"})}const u=t.match(k);if(u){const[s,r]=u;if(Number.parseInt(r,10)!==(e.length-2)/2)throw new L({expectedSize:Number.parseInt(r,10),givenSize:(e.length-2)/2});return p(e,{dir:"right",size:i?32:null})}const c=t.match(T);if(c&&Array.isArray(e)){const[s,r]=c,o=[];for(let a=0;a<e.length;a++)o.push(b(r,e[a],!0));return o.length===0?"0x":y(o)}throw new A(t)}function $(t){const{source:e}=t,i=new Map,n=new C(8192),u=new Map,c=({address:s,chainId:r})=>`${s}.${r}`;return{async consume({address:s,chainId:r,client:o}){const a=c({address:s,chainId:r}),g=this.get({address:s,chainId:r,client:o});this.increment({address:s,chainId:r});const f=await g;return await e.set({address:s,chainId:r},f),n.set(a,f),f},async increment({address:s,chainId:r}){const o=c({address:s,chainId:r}),a=i.get(o)??0;i.set(o,a+1)},async get({address:s,chainId:r,client:o}){const a=c({address:s,chainId:r});let g=u.get(a);return g||(g=(async()=>{try{const d=await e.get({address:s,chainId:r,client:o}),h=n.get(a)??0;return h>0&&d<=h?h+1:(n.delete(a),d)}finally{this.reset({address:s,chainId:r})}})(),u.set(a,g)),(i.get(a)??0)+await g},reset({address:s,chainId:r}){const o=c({address:s,chainId:r});i.delete(o),u.delete(o)}}}const H="0x6492649264926492649264926492649264926492649264926492649264926492";function K(t){const{address:e,data:i,signature:n,to:u="hex"}=t,c=y([E([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,i,n]),H]);return u==="hex"?c:N(c)}function O(t){const{key:e="public",name:i="Public Client"}=t;return S({...t,key:e,name:i,type:"publicClient"}).extend(B)}function V(t){const{r:e,s:i}=_.Signature.fromCompact(t.slice(2,130)),n=+`0x${t.slice(130)}`,[u,c]=(()=>{if(n===0||n===1)return[void 0,n];if(n===27)return[BigInt(n),0];if(n===28)return[BigInt(n),1];throw new Error("Invalid yParityOrV value")})();return typeof u<"u"?{r:l(e,{size:32}),s:l(i,{size:32}),v:u,yParity:c}:{r:l(e,{size:32}),s:l(i,{size:32}),yParity:c}}export{$ as a,O as c,R as e,V as p,K as s};
