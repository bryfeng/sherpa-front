import{P as m,bY as p,bL as w,a8 as x,b_ as h,cm as z,cj as M,dZ as P,cl as l,d_ as k,a0 as T,d$ as A,a7 as C,e0 as E,bA as L,cf as N,l as S,m as _,e1 as B}from"./index-DYGJqFH8.js";function R(t,e){if(t.length!==e.length)throw new m({expectedLength:t.length,givenLength:e.length});const i=[];for(let n=0;n<t.length;n++){const u=t[n],c=e[n];i.push(b(u,c))}return p(i)}function b(t,e,i=!1){if(t==="address"){const s=e;if(!w(s))throw new x({address:s});return h(s.toLowerCase(),{size:i?32:null})}if(t==="string")return z(e);if(t==="bytes")return e;if(t==="bool")return h(M(e),{size:i?32:1});const n=t.match(P);if(n){const[s,r,o="256"]=n,a=Number.parseInt(o,10)/8;return l(e,{size:i?32:a,signed:r==="int"})}const u=t.match(k);if(u){const[s,r]=u;if(Number.parseInt(r,10)!==(e.length-2)/2)throw new T({expectedSize:Number.parseInt(r,10),givenSize:(e.length-2)/2});return h(e,{dir:"right",size:i?32:null})}const c=t.match(A);if(c&&Array.isArray(e)){const[s,r]=c,o=[];for(let a=0;a<e.length;a++)o.push(b(r,e[a],!0));return o.length===0?"0x":p(o)}throw new C(t)}function I(t){const{source:e}=t,i=new Map,n=new E(8192),u=new Map,c=({address:s,chainId:r})=>`${s}.${r}`;return{async consume({address:s,chainId:r,client:o}){const a=c({address:s,chainId:r}),g=this.get({address:s,chainId:r,client:o});this.increment({address:s,chainId:r});const f=await g;return await e.set({address:s,chainId:r},f),n.set(a,f),f},async increment({address:s,chainId:r}){const o=c({address:s,chainId:r}),a=i.get(o)??0;i.set(o,a+1)},async get({address:s,chainId:r,client:o}){const a=c({address:s,chainId:r});let g=u.get(a);return g||(g=(async()=>{try{const y=await e.get({address:s,chainId:r,client:o}),d=n.get(a)??0;return d>0&&y<=d?d+1:(n.delete(a),y)}finally{this.reset({address:s,chainId:r})}})(),u.set(a,g)),(i.get(a)??0)+await g},reset({address:s,chainId:r}){const o=c({address:s,chainId:r});i.delete(o),u.delete(o)}}}const $="0x6492649264926492649264926492649264926492649264926492649264926492";function O(t){const{address:e,data:i,signature:n,to:u="hex"}=t,c=p([L([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,i,n]),$]);return u==="hex"?c:N(c)}function V(t){const{key:e="public",name:i="Public Client"}=t;return S({...t,key:e,name:i,type:"publicClient"}).extend(_)}function j(t){const{r:e,s:i}=B.Signature.fromCompact(t.slice(2,130)),n=+`0x${t.slice(130)}`,[u,c]=(()=>{if(n===0||n===1)return[void 0,n];if(n===27)return[BigInt(n),0];if(n===28)return[BigInt(n),1];throw new Error("Invalid yParityOrV value")})();return typeof u<"u"?{r:l(e,{size:32}),s:l(i,{size:32}),v:u,yParity:c}:{r:l(e,{size:32}),s:l(i,{size:32}),yParity:c}}export{I as a,V as c,R as e,j as p,O as s};
